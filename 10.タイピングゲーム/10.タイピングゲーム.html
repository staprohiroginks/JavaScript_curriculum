<!DOCTYPE html>
<html>
<head>
<title>10.タイピングゲーム.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <title>10.タイピングゲーム</title>
</head>
<body>
<h1>タイピングゲームを作ろう！</h1>
<p>前回までの学習で、タイピングゲーム作成に必要な知識を学習してきました！<br>
今回からいよいよタイピングゲームを作成していきます！</p>
<h2><a href="../タイピングゲーム/index.html" target="_blank" rel="noopener noreferrer">見本はこちら</a></h2>
<h2><b>JavaScriptのコードの完成形を載せておくので、書く順番が分からなくなったら参考にしてください。</b></h2>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> questions = [
    <span class="hljs-string">'スタートプログラミング'</span>,
    <span class="hljs-string">'プログラミングスクール'</span>,
    <span class="hljs-string">'ミンクル'</span>,
    <span class="hljs-string">'エンジニアになりたいな'</span>,
    <span class="hljs-string">'ゲームを作れるようになる！'</span>,
    <span class="hljs-string">'今はスクラッチを勉強中です'</span>,
    <span class="hljs-string">'いろんなところに教室があります'</span>,
    <span class="hljs-string">'タイピングの練習をがんばるぞ！'</span>,
    <span class="hljs-string">'検定問題にもチャレンジしています'</span>,
    <span class="hljs-string">'パソコンはとても楽しいです'</span>
];

<span class="hljs-keyword">const</span> entered = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'entered'</span>);
<span class="hljs-keyword">const</span> remained = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'remained'</span>);
<span class="hljs-keyword">const</span> inputText = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'inputText'</span>);
<span class="hljs-keyword">const</span> game = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'game'</span>);
<span class="hljs-keyword">const</span> message = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'message'</span>);
<span class="hljs-keyword">const</span> endMessage = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'endMessage'</span>);
<span class="hljs-keyword">const</span> timerElement = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'timer'</span>);

<span class="hljs-keyword">let</span> currentKey;
<span class="hljs-keyword">let</span> currentText;
<span class="hljs-keyword">let</span> timer;
<span class="hljs-keyword">let</span> countTimer = <span class="hljs-number">30</span>; 

<span class="hljs-keyword">const</span> setQuestion = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    
    currentKey = <span class="hljs-built_in">Math</span>.floor( <span class="hljs-built_in">Math</span>.random() * questions.length );
    currentText = questions[ currentKey ];

    questions.splice(currentKey, <span class="hljs-number">1</span>);
    
    entered.textContent = <span class="hljs-string">''</span>;
    remained.textContent = currentText;
    
    inputText.value = <span class="hljs-string">''</span>;
};

<span class="hljs-keyword">const</span> displayEndMessage = <span class="hljs-function">(<span class="hljs-params">messageText</span>) =&gt;</span> {
    clearInterval(timer);
    game.classList.add(<span class="hljs-string">'hidden'</span>);
    message.classList.remove(<span class="hljs-string">'hidden'</span>);
    endMessage.innerHTML = <span class="hljs-string">`<span class="hljs-subst">${messageText}</span>&lt;br&gt;&lt;button id='replayBtn' class='button'&gt;もう一度プレイする&lt;/button&gt;`</span>;
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'replayBtn'</span>).addEventListener(<span class="hljs-string">'click'</span>, () =&gt; {
        <span class="hljs-built_in">window</span>.location.reload();
    });
};

<span class="hljs-keyword">const</span> startTimer = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    timer = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        countTimer--;
        timerElement.textContent = <span class="hljs-string">`<span class="hljs-subst">${countTimer}</span>秒`</span>;

        <span class="hljs-keyword">if</span> (countTimer &lt;= <span class="hljs-number">0</span>) {
            displayEndMessage(<span class="hljs-string">"タイムアップ！もう一度挑戦してね！"</span>);
        }
    }, <span class="hljs-number">1000</span>);
};

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'input'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> input = inputText.value;

    <span class="hljs-keyword">if</span> (currentText.startsWith(input)) {
        entered.textContent = input;
        remained.textContent = currentText.slice(input.length);

        inputText.classList.add(<span class="hljs-string">'correct'</span>);
        inputText.classList.remove(<span class="hljs-string">'incorrect'</span>);

        <span class="hljs-keyword">if</span> (input === currentText) {
            <span class="hljs-keyword">if</span> (questions.length &lt;= <span class="hljs-number">0</span>) {
                displayEndMessage(<span class="hljs-string">"ゲームクリア！お疲れ様でした！"</span>);
            } <span class="hljs-keyword">else</span> {
                setQuestion(); 
            }
        }
    } <span class="hljs-keyword">else</span> {
        inputText.classList.add(<span class="hljs-string">'incorrect'</span>);
        inputText.classList.remove(<span class="hljs-string">'correct'</span>);
    }
});

setQuestion();
startTimer();

</div></code></pre>
<p><b>それでは、早速作っていきましょう！</b></p>
<hr>
<h2><b>HTML</b></h2>
<p>①まずは、HTMLのコードを準備します。<br>
IDやclassがたくさん振ってありますが、そのIDを取得して操作する場面で解説をしていきます。</p>
<p>今は一つ一つのIDやclassの意味は分からなくても良いので、HTMLのコードを書いていきましょう！</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- index.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"game"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"timer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer"</span>&gt;</span>30秒<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"inputText"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"question"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"entered"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"marker"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"remained"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"inputText"</span> <span class="hljs-attr">autofocus</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-container hidden"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"endMessage"</span>&gt;</span>
        ゲームクリア！お疲れ様でした！<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"replayBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span>&gt;</span>もう一度プレイする<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></code></pre>
<hr>
<h2><b>CSS</b></h2>
<p>②次に、cssで見た目を整えていきます。<br>
今回はcssの学習ではないため、コードの中身を覚えたりチェックする必要はありません。</p>
<p>コードはそのままコピーして貼り付けてください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">/* style.css */</span>
<span class="hljs-selector-class">.text-container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
}
<span class="hljs-selector-class">.text-container</span> <span class="hljs-selector-tag">label</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
}
<span class="hljs-selector-class">.question</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">4vw</span>;
    <span class="hljs-attribute">font-weight</span>: bold;
    <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.25em</span>;
    <span class="hljs-attribute">text-align</span>: center;
}
<span class="hljs-selector-class">.marker</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#91dbf1</span>;
}
<span class="hljs-selector-class">.text</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">2rem</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2vw</span>;
    <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.1em</span>;
    <span class="hljs-attribute">text-align</span>: center;
}
<span class="hljs-selector-class">.text</span><span class="hljs-selector-pseudo">:focus</span>, <span class="hljs-selector-class">.text</span><span class="hljs-selector-pseudo">:focus-visible</span> {
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">outline</span>: none;
}
<span class="hljs-selector-class">.message</span> {
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">2rem</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
    <span class="hljs-attribute">text-align</span>: center;
}
<span class="hljs-selector-class">.button</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.hidden</span> {
    <span class="hljs-attribute">display</span>: none;
}
<span class="hljs-selector-class">.correct</span> {
    <span class="hljs-attribute">color</span>: black;
}
<span class="hljs-selector-class">.incorrect</span> {
    <span class="hljs-attribute">color</span>: red;
}
<span class="hljs-selector-class">.timer</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
}
</div></code></pre>
<p>コードを記述後、リロードして確認してみましょう！<br>
画像のようになっていれば上手くコードが記述出来ています。</p>
<img src="../images/js-css.jpg" alt="js-cssの画像" style="border: 1px solid black;" width='400'>
<hr>
<h2><b>JavaScript</b></h2>
<p>③次は、いよいよJavaScriptでタイピングゲームの動きの部分を作成していきます。<br>
まずは、今回タイピングする文章の部分を作成していきましょう！</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> questions = [
    <span class="hljs-string">'スタートプログラミング'</span>,
    <span class="hljs-string">'プログラミングスクール'</span>,
    <span class="hljs-string">'ミンクル'</span>,
    <span class="hljs-string">'エンジニアになりたいな'</span>,
    <span class="hljs-string">'ゲームを作れるようになる！'</span>,
    <span class="hljs-string">'今はスクラッチを勉強中です'</span>,
    <span class="hljs-string">'いろんなところに教室があります'</span>,
    <span class="hljs-string">'タイピングの練習をがんばるぞ！'</span>,
    <span class="hljs-string">'検定問題にもチャレンジしています'</span>,
    <span class="hljs-string">'パソコンはとても楽しいです'</span>
];
</div></code></pre>
<p>それでは、上記コードの意味を解説していきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> questions = [
   
];
</div></code></pre>
<p>この部分は、タイピングする文章を格納するための配列を定義しています。<br>
分かりやすく説明すると<code>questions</code>という名前の配列を作成しているということになります。<p>
<p>配列で作ることで、複数の文章を効率よく管理し、操作を簡単にすることが出来ます。<p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
    <span class="hljs-string">'スタートプログラミング'</span>,
    <span class="hljs-string">'プログラミングスクール'</span>,
    <span class="hljs-string">'ミンクル'</span>,
    <span class="hljs-string">'エンジニアになりたいな'</span>,
    <span class="hljs-string">'ゲームを作れるようになる！'</span>,
    <span class="hljs-string">'今はスクラッチを勉強中です'</span>,
    <span class="hljs-string">'いろんなところに教室があります'</span>,
    <span class="hljs-string">'タイピングの練習をがんばるぞ！'</span>,
    <span class="hljs-string">'検定問題にもチャレンジしています'</span>,
    <span class="hljs-string">'パソコンはとても楽しいです'</span>
</div></code></pre>
<p>この配列には、タイピングゲームで使用する文章が格納されています。<br>
各文章はシングルコーテーション（''）で囲まれており、これは文字列を表しています。</p>
<p>配列の中では、各文章がカンマ（,）で区切られ、複数の文章を1つの変数にまとめて格納しています。</p>
</p>
<p>タイピングゲームでは、この配列からランダムに1つの文章が選ばれ問題が出題されていきます。</p>
<hr>
<p>④次は、タイピングゲームで必要なHTMLの要素をJavaScript側から取得してきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> entered = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'entered'</span>);
<span class="hljs-keyword">const</span> remained = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'remained'</span>);
<span class="hljs-keyword">const</span> inputText = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'inputText'</span>);
<span class="hljs-keyword">const</span> game = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'game'</span>);
<span class="hljs-keyword">const</span> message = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'message'</span>);
<span class="hljs-keyword">const</span> endMessage = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'endMessage'</span>);
<span class="hljs-keyword">const</span> timerElement = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'timer'</span>);
</div></code></pre>
<p>このコードでは、JavaScriptからHTML要素にアクセスし、<code>getElementById</code> で特定の ID を持つHTML要素を取得しています。</p>
<p>それでは、上記コードの意味を解説していきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> entered = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'entered'</span>);
</div></code></pre>
<p>タイピング中に、ユーザーが入力した部分のテキストを表示する要素を指しています。<br>
この<code>span</code>要素は、ユーザーが入力するたびにリアルタイムで更新されます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> remained = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'remained'</span>);
</div></code></pre>
<p>まだ入力していない部分の問題文を表示する要素です。<br>
この <code>span</code>要素に、残りの文字列がリアルタイムで表示され、入力が進むにつれてテキストが減っていきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> inputText = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'inputText'</span>);
</div></code></pre>
<p>ユーザーが実際に入力するための <code>input</code> 要素で、タイピングゲームで文字を入力するためのテキストボックスです。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> game = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'game'</span>);
</div></code></pre>
<p>タイピングゲーム全体を管理するための要素です。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> message = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'message'</span>);
</div></code></pre>
<p>ゲーム終了時に表示されるメッセージ部分です。<br>
タイムアップやゲームクリアの際に、この <code>div</code>要素が表示され、ユーザーに結果を知らせます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> endMessage = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'endMessage'</span>);
</div></code></pre>
<p>ゲーム終了後の具体的なメッセージ（タイムアップ）を表示する要素です。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> timerElement = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'timer'</span>);
</div></code></pre>
<p>残り時間をリアルタイムで表示するための要素です。<br>
この  <code>div</code> 要素には、タイマーの秒数が表示され、カウントダウンしていきます。</p>
<h2><b>「どのHTML要素に何のIDが付いていて、何のためにそのIDを取得しているのか」を説明したのですが、<br>
IDを付ける箇所もHTMLも自分で好きなように変更が出来るため、この作り方はあくまで一例になります！</b></h2>
<h2><b>「今回はこのようなやり方で作るんだな」という認識で大丈夫なので、深く理解する必要はありません！</b></h2>
<hr>
<p>⑤次は、問題番号を格納する変数やタイマーを管理する変数を作成していきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">let</span> currentKey;
<span class="hljs-keyword">let</span> currentText;
<span class="hljs-keyword">let</span> timer;
<span class="hljs-keyword">let</span> countTimer = <span class="hljs-number">30</span>; 
</div></code></pre>
<p>それでは、上記コードの意味を解説していきます。</p>
<p>先頭の<code>let</code>は変数の宣言を意味しています。</p>
<p><code>currentKey</code> は、現在の問題文の番号を格納するための変数です。<br>
後ほど、ランダムに選ばれた問題の番号がこの変数に保存されます。</p>
<p><code>currentText</code> は、現在表示されている問題文自体を保持する変数です。
後ほど、ランダムに選ばれた問題文がこの変数に格納され、ユーザーが入力するべきテキストとして使われます。</p>
<p><code>timer</code>は、タイマーを管理するための変数です。<br>
後ほど、<code>setInterval</code>関数を使って、この変数で時間のカウントダウンを管理します。</p>
<p><code>countTimer</code>ゲームのタイマーを30秒に設定する変数です。<br>
残り時間をリアルタイムで表示するために使われます。ゲーム開始時には30秒から始まり、カウントダウンしていきます。</p>
<hr>
<p>⑥次は、問題をランダムにセットする関数を作成していきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> setQuestion = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    currentKey = <span class="hljs-built_in">Math</span>.floor( <span class="hljs-built_in">Math</span>.random() * questions.length );
    currentText = questions[ currentKey ];

    questions.splice(currentKey, <span class="hljs-number">1</span>);

    entered.textContent = <span class="hljs-string">''</span>;
    remained.textContent = currentText;

    inputText.value = <span class="hljs-string">''</span>;
};
</div></code></pre>
<p>それでは、上記コードの意味を解説していきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> setQuestion = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  
};
</div></code></pre>
<p>ここでは、<code>setQuestion</code>という名前の関数をアロー関数を使って定義しています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
currentKey = <span class="hljs-built_in">Math</span>.floor( <span class="hljs-built_in">Math</span>.random() * questions.length );
</div></code></pre>
<p>このコードでは、ランダムに問題を選ぶ処理が行われています。</p>
<p><code>Math.random()</code> は、0 以上 1 未満のランダムな小数を生成する関数です。<br>
例えば、0.25 や 0.97 などが生成されます。</p>
<p><code>questions.length</code> は、<code>questions</code> 配列の要素数を表します。<br>
今回は配列の中に 10 個の要素があるため、<code>questions.length</code> は 10 になります。</p>
<p>つまり、<code>Math.floor(Math.random() * questions.length)</code> では、<br>
0.25 や 0.97 などの「0 以上 1 未満」のランダムな小数に <code>questions.length</code>（今回は 10）を掛けています。</p>
<p>例えば、<code>Math.random()</code> が 0.25 であれば、<code>0.25 * 10</code> で 2.5、<br>
0.97 であれば <code>0.97 * 10</code> で 9.7 となります。</p>
<p><code>Math.floor()</code> は小数点以下を切り捨てて、整数を返す関数です。<br>
そのため、2.5 であれば「2」、9.7 であれば「9」という整数が返ってきます。</p>
<p>そして、返ってきた整数を<code>currentKey</code>という変数に格納しています。 </p>
<p>簡単にまとめると、ランダムに生成された数値を使って、配列の要素を選ぶ範囲を決めているということです。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
currentText = questions[currentKey];
</div></code></pre>
<p><code>questions</code>配列の中の<code>currentKey</code>番目を取得し、<br>
それを<code>currentText</code>に格納しています。</p>
<p><code>currentKey</code>には先程説明した通り、0から9までのいずれかの数値が格納されています。</p>
<p>つまり、<code>questions</code>という配列の中にある情報の中から、<br>
ランダムに選ばれた要素を<code>currentText</code>に格納しているということです。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
questions.splice(currentKey, <span class="hljs-number">1</span>);
</div></code></pre>
<p>このコードでは、選ばれた問題を配列の中から削除する処理をしています。</p>
<p><code>splice()</code>というメソッドは、配列に対して要素を追加、削除、または置き換えることが出来ます。</p>
<p><code>(currentKey, 1)</code>は、currentKey番目の要素を1つ削除するという意味になります。<br>
そのため、<code>currentKey</code>に「5」が格納されていれば、<code>questions</code>配列の5番目の要素を削除するということになります。</p>
<p>このようにして、一度選ばれた問題が再び出題されないように、配列から順次削除しています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
entered.textContent = <span class="hljs-string">''</span>;
</div></code></pre>
<p>このコードでは、ユーザーがこれまでに入力したテキストが表示されていた<code>entered</code>要素をリセットしています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
remained.textContent = currentText;
</div></code></pre>
<p>選ばれた問題文が<code>currentText</code>に格納されているので、その問題を<code>remained</code>に表示します。<br>
これにより、次にユーザーが入力するべき問題文が画面に表示されます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
 inputText.value = <span class="hljs-string">''</span>;
</div></code></pre>
<p>このコードでは、<code>inputText</code> というテキスト入力欄の内容をリセットしています。</p>
<p><code>inputText.value = '';</code> というコードによって、<code>inputText</code> 要素の値が空文字 <code>''</code> に設定され、<br>
ユーザーがこれまで入力した内容がクリアされます。</p>
<p>つまり、入力フィールドが空の状態に戻り、次の問題に対して新たに入力を始める準備が整います。</p>
<img src="../images/inputred.jpg" alt="js-cssの画像" style="border: 1px solid black;" width='700' height='300'>
<p><code>entered.textContent = '';</code>は、見た目に表示されている、入力済みのテキストを消去します。<br>
これにより、前の問題に対する入力結果が画面から消えます。</p>
<p><code>inputText.value = '';:</code>は、テキストボックスの中身（ユーザーが実際に入力したもの）を消去します。<br>
これにより、次の問題に対して新しく入力できるようにリセットされます。</p>
<p>このように、<code>entered.textContent = '';</code> が見た目をクリアし、<code>inputText.value = ''; </code>が<br>
テキストボックスの中のデータ（中身）をクリアする役割を担っています。</p>
<h2><b>これで問題をランダムにセットする関数が出来たので、<br>
コードの一番下に<code>setQuestion()</code>と書いて、問題を表示させてみましょう！</b></h2>
<p>問題がランダムに表示されることが確認できたら、<code>setQuestion()</code>は一度消しておいてください。</p>
<hr>
<p>⑦次は、タイマーが0になった時やゲームがクリアされた時にメッセージを表示する関数を作成していきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> displayEndMessage = <span class="hljs-function">(<span class="hljs-params">messageText</span>) =&gt;</span> {
    clearInterval(timer);
    game.classList.add(<span class="hljs-string">'hidden'</span>);
    message.classList.remove(<span class="hljs-string">'hidden'</span>);
    endMessage.innerHTML = <span class="hljs-string">`<span class="hljs-subst">${messageText}</span>&lt;br&gt;&lt;button id='replayBtn' class='button'&gt;もう一度プレイする&lt;/button&gt;`</span>;
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'replayBtn'</span>).addEventListener(<span class="hljs-string">'click'</span>, () =&gt; {
        <span class="hljs-built_in">window</span>.location.reload();
    });
};
</div></code></pre>
<p>それでは、上記コードの意味を解説していきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> displayEndMessage = <span class="hljs-function">(<span class="hljs-params">messageText</span>) =&gt;</span> {
   
};
</div></code></pre>
<p>ここでは、<code>setQuestion</code>という名前の関数をアロー関数を使って定義しています。</p>
<p><code>setQuestion</code>関数の引数<code>messageText</code>には、後ほど設定する文字列が入るのですが
<br>後で解説するので今はそのまま進んでもらって大丈夫です！</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
clearInterval(timer);
</div></code></pre>
<p>ここでは、ゲーム内で動作しているタイマーを停止しています。<br>
具体的には、<code>setInterval</code>で開始されたタイマーを<code>clearInterval()</code>を使って止める処理です。</p>
<p>タイマーのプログラムは後ほど出てくるので、今は「この1文でタイマーを止めている」ということを覚えておきましょう。<br>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
game.classList.add(<span class="hljs-string">'hidden'</span>);
</div></code></pre>
<p>ここでは、ゲーム画面全体（<code>game</code>）要素を隠す処理をしています。</p>
<p><code>classList.add</code>はクラスを追加するという命令で、今回は<code>hidden</code>というクラスを追加しています。</p>
<p><code>hidden</code>というクラスには、cssで<code>display: none;</code>を<br>
当てているので、要素が隠れるという処理になります。</p>
<p>つまり、ゲームが終了したら問題文や入力欄を隠すという処理をここで行っているということになります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
message.classList.remove(<span class="hljs-string">'hidden'</span>);
</div></code></pre>
<p>ここでは、ゲーム終了メッセージを表示する処理をしています。</p>
<p><code>classList.remove</code>はクラスを削除するという命令で、<br>
今回は<code>message</code>要素についている<code>hidden</code>というクラスを削除しています。</p>
<p><code>hidden</code>というクラスには、cssで<code>display: none;</code>を<br>
当てているので、それが削除される＝要素が表示されるようになります。</p>
<p>表示される<code>message</code>要素は画像の箇所になります。</p>
<img src="../images/message.jpg" alt="messageの画像" style="border: 1px solid black;" width='700' height='90'>
<p>これにより、ゲーム終了時に終了メッセージが表示されるようになります！</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
endMessage.innerHTML = <span class="hljs-string">`<span class="hljs-subst">${messageText}</span>&lt;br&gt;&lt;button id='replayBtn' class='button'&gt;もう一度プレイする&lt;/button&gt;`</span>;
</div></code></pre>
<p>ここでは、ゲーム終了時に表示するメッセージと再プレイボタンを画面に表示する処理をしています。</p>
<p><code>endMessage</code>は、以前取得してきたHTML要素を示しています。</p>
<p><code>innerHTML</code>は、HTMLタグを含めて要素内の内容を設定・取得できるプロパティです。<br>
<b>ただし、セキュリティ上の都合でほとんど使うことはないので、今回のみ使うという認識で大丈夫です。</b></p>
<p><code>${messageText}</code> は、テンプレートリテラルを使用しており、<br>
バッククォート<code>``</code>で囲むことで、文字列の中に変数や式を埋め込むことができます。</p>
<p><code>messageText</code>には、後ほど設定する文字列が入るのですが、後で解説するので今はそのまま進んでもらって大丈夫です！</p>
<p><code>br</code>は改行タグです。</p>
<p><code>button id='replayBtn' class='button'> もう一度プレイする」</code>というコードでは<br>
再プレイボタンを作成しています。</p>
<p>ややこしく見えるかもしれませんが、<code>button</code>タグにIDとclassを付けて、<br>
「もう一度プレイする」というテキストを設定しているだけです。</p>
<p><b>まとめると、ゲーム終了時のメッセージと再プレイボタンを動的に表示させるための処理をしているということになります！</b></p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'replayBtn'</span>).addEventListener(<span class="hljs-string">'click'</span>, () =&gt; {
       
});
</div></code></pre>
<p>このコードは、再プレイボタン<code>replayBtn</code>がクリックされたときに実行される処理を設定する部分です。<br>
具体的には、<code>addEventListener()</code>を使ってクリックイベントをボタンに追加しています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-built_in">window</span>.location.reload();
</div></code></pre>
<p>このコードは、JavaScriptで現在のページを再読み込みするためのメソッドです。</p>
<p>つまり、ゲームが終了した後に「もう一度プレイする」ボタンをクリックすることでページがリロードされて<br>
もう一度最初からプレイできるようになっています。</p>
<h2><b>これでタイマーが0になった時やゲームがクリアされた時に<br>
メッセージを表示する関数が出来ました！</b></h2>
<hr>
<p>⑧次は、ゲーム実行時にカウントダウンされていくタイマーの関数を作成していきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> startTimer = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    timer = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        countTimer--;
        timerElement.textContent = <span class="hljs-string">`<span class="hljs-subst">${countTimer}</span>秒`</span>;

        <span class="hljs-keyword">if</span> (countTimer &lt;= <span class="hljs-number">0</span>) {
            displayEndMessage(<span class="hljs-string">"タイムアップ！もう一度挑戦してね！"</span>);
        }
    }, <span class="hljs-number">1000</span>);
};
</div></code></pre>
<p>それでは、上記コードの意味を解説していきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> startTimer = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
   
};
</div></code></pre>
<p>このコードでは、アロー関数を使って<code>startTimer</code>という関数を定義しています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
timer = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {

}, <span class="hljs-number">1000</span>);
</div></code></pre>
<p><code>setInterval()</code> は、指定した時間間隔（ミリ秒単位）ごとに特定の処理を繰り返し実行するための関数です。</p>
<p>1000 は 1秒（1000ミリ秒）を意味しているため、今回は1秒ごとに中の処理が実行されます。</p>
<p><code>setInterval()</code>という関数の実行時に「タイマーID」というものが返されるのですが、
このタイマーIDを<code>clearInterval()</code>に渡すことで、繰り返し処理を停止することが出来ます。</p>
<p>そのため、そのIDを<code>timer</code>という変数に保存しておく必要があるので、上記のように
<code>setInterval()</code>が返す値を<code>timer</code>という変数に保存しています。<p>
<p>タイマーを止める処理<code>clearInterval()</code>の説明は⑦で出てきているので、忘れてしまった場合は見返してみましょう！</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
countTimer--;
</div></code></pre>
<p>これはタイマーの秒数を1ずつ減らす処理です。<br>
<code>countTimer</code> は最初に 30 で設定されているので、この部分で 1秒ごとに<code> countTimer</code> が減っていきます。</p>
<p><code>countTimer</code>の値を30に設定するコードは⑤で書いています。<p>
<p><code> -- </code>は、JavaScriptにおける「デクリメント演算子」と呼ばれるもので、変数の値を1ずつ減らすために使用されます。<p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
timerElement.textContent = <span class="hljs-string">`<span class="hljs-subst">${countTimer}</span>秒`</span>;
</div></code></pre>
<p>これは画面に残り時間（タイマー）を表示する部分です。<br>
<code>timerElement</code>は以前IDで取得してきたHTML要素を指していて、<code>textContent</code> を使ってその要素に残り時間を表示しています。</p>
<p><code>`${countTimer}秒`</code>は、テンプレートリテラルを使用して文字列の中に変数を入れています。<br>
<code>テンプレートリテラル</code>では、バッククォート<code>``</code>を使って文字列を囲みます。</p>
<p>テンプレートリテラル内の ${} の中に <code>countTimer</code> という変数を入れているので<br>
その変数の現在の値が表示されます。</p>
<p>つまり、変数<code>countTimer</code>が1秒ずつ減っていくのでその情報を取得して<br>
文字として画面に表示させている処理がこのコードになります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">if</span> (countTimer &lt;= <span class="hljs-number">0</span>) {

}
</div></code></pre>
<p>このコードは、もしタイマーが0以下になったら〜という条件文になります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
displayEndMessage(<span class="hljs-string">"タイムアップ！もう一度挑戦してね！"</span>);
</div></code></pre>
<p>このコードは、<code>displayEndMessage</code>という関数を呼び出しています。<br>
引数に「"タイムアップ！もう一度挑戦してね！"」という文字列が入っています。</p>
<p>つまり、タイマーが0以下になったらタイムアップのメッセージを呼び出すために<br>
<code>displayEndMessage</code>という関数を呼び出しているということになります。</p>
<h2><b>これでタイマーの関数が作成出来ました！</b></h2>
<hr>
<p>⑨次は、プレイヤーがテキスト入力を行う部分を作成していきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'input'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> input = inputText.value;

    <span class="hljs-keyword">if</span> (currentText.startsWith(input)) {
        entered.textContent = input;
        remained.textContent = currentText.slice(input.length);

        inputText.classList.add(<span class="hljs-string">'correct'</span>);
        inputText.classList.remove(<span class="hljs-string">'incorrect'</span>);

        <span class="hljs-keyword">if</span> (input === currentText) {
            <span class="hljs-keyword">if</span> (questions.length &lt;= <span class="hljs-number">0</span>) {
                displayEndMessage(<span class="hljs-string">"ゲームクリア！お疲れ様でした！"</span>);
            } <span class="hljs-keyword">else</span> {
                setQuestion(); 
            }
        }
    } <span class="hljs-keyword">else</span> {
        inputText.classList.add(<span class="hljs-string">'incorrect'</span>);
        inputText.classList.remove(<span class="hljs-string">'correct'</span>);
    }
});
</div></code></pre>
<p>それでは、上記コードの意味を解説していきます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'input'</span>, () =&gt; {
    
});
</div></code></pre>
<p>ここでは、<code>input</code>イベントが設定されています。<br>
<code>input</code>イベントは、入力フォーム（<code>inputText</code>）に文字が入力されるたびに発生します。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">const</span> input = inputText.value;
</div></code></pre>
<p><code>inputText.value</code> は、プレイヤーが入力したテキストを取得しています。<br>
その値を<code>input</code>という変数に格納しています。つまり、プレイヤーが今入力している文字列がこの<code>input</code>に入ります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">if</span> (currentText.startsWith(input)) {

} 
</div></code></pre>
<p>ここでは、プレイヤーの入力が現在の問題の文字列（<code>currentText</code>）と一致しているかどうかを確認しています。</p>
<p><code>startsWith</code> は、JavaScriptの文字列メソッドの一つで、<br>
ある文字列が特定の文字列で始まっているかどうかを確認するために使われます。</p>
<p>例えば、問題が「スタートプログラミング」の場合、プレイヤーが「ス」と入力していれば、一致しているので処理が進みます。<br>
一致しない場合は次の else 部分に進みます。</p>
<p>つまり、<code>currentText.startsWith(input)</code> は、<code>currentText</code>の最初の部分が
プレイヤーの入力（<code>input</code>）と一致しているかどうかをチェックするメソッドです。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
entered.textContent = input;
</div></code></pre>
<p>このコードは、プレイヤーが入力した文字をリアルタイムで画面上に表示するためのものです。<br>
<code>entered</code> はこれまでに入力した正しい文字を表示する領域であり、<code>textContent</code> でその内容が更新されます。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
remained.textContent = currentText.slice(input.length);
</div></code></pre>
<p>ここでは、プレイヤーがまだ入力していない部分の文字列を取り出して、画面に表示する処理です。</p>
<p><code>remained</code>は事前に取得されたHTML要素で、プレイヤーがまだ入力していない、残りの文字列を表示するための要素です。</p>
<p><code>textContent</code> は、HTML要素内に表示されるテキストの内容を操作するプロパティです。<br>
<code>remained.textContent </code>では、<code>remained </code>要素のテキストを更新しています。</p>
<p><code>currentText </code>は、現在の問題の文字列を保持しています。<br>
例えば、「スタートプログラミング」が問題だったと仮定して説明を続けていきます。</p>
<p><code>slice(input.length)</code> は、文字列の一部を取り出すメソッドです。<br>
<code>slice() </code>の引数に開始位置を指定すると、その位置から文字列を切り取ります。</p>
<p><code>input.length</code> は、プレイヤーが入力した文字列の長さを表しています。<br>
例えば、プレイヤーが「スタート」を入力した場合、input.length は 4 になります（"スタート" の文字数）。</p>
<p>まとめると、<code>currentText.slice(input.length)</code> は、<code>input.length</code> の位置から文字列を切り取って返します。</p>
<p>もっと簡単に説明すると「正しく打てている部分とまだ打ててない部分をプログラムで分けている」ということになります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
inputText.classList.add(<span class="hljs-string">'correct'</span>);
</div></code></pre>
<p>ここでは、正しく文字を入力した場合に<code>classList.add()</code>でクラスを付けて、正しく打てた部分を黒色に変える処理をしています。<br>
実際に色を変える処理はcssで行っています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">/* style.css */</span>
<span class="hljs-selector-class">.correct</span> {
    <span class="hljs-attribute">color</span>: black;
}
</div></code></pre>
<p><code>inputText</code> は、事前に<code>document.getElementById() </code>などで取得された入力フィールド（テキストボックス）を指しています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
inputText.classList.remove(<span class="hljs-string">'incorrect'</span>);
</div></code></pre>
<p>ここでは、正しく文字を入力した場合に<code>classList.remove()</code>で<code>incorrect</code>というクラスを削除しています。</p>
<p><code>incorrect</code>というクラスが付いた時には、文字を赤色にするという命令がcssで書かれています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">/* style.css */</span>
<span class="hljs-selector-class">.incorrect</span> {
    <span class="hljs-attribute">color</span>: red;
}
</div></code></pre>
<p>つまり、その<code>incorrect</code>というクラスを取り外すことで文字が赤色ではなくなり、<br>
正しく打てているということが視覚的に分かるようになっています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">if</span> (input === currentText) {
   
}
</div></code></pre>
<p>ここでは、プレイヤーが入力した文字列<code>input</code>が、現在の問題の文字列<code>currentText</code>と<br>
完全に一致しているかをチェックしています。</p>
<p><code>input === currentText</code> は、入力内容が問題文とまったく同じである場合に<code> true </code>となり、<br>その場合のみ次の処理が実行されます。</p>
<p>例えば、<code>currentText</code> が「スタートプログラミング」で、プレイヤーがそれをすべて正しく入力したとき、この条件は <code>true </code>になり次の処理に移ります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">if</span> (questions.length &lt;= <span class="hljs-number">0</span>) {
    displayEndMessage(<span class="hljs-string">"ゲームクリア！お疲れ様でした！"</span>);
} 
</div></code></pre>
<p>ここでは、現在の問題を解き終わった後、残りの問題があるかどうかをチェックしています。</p>
<p><code>questions</code>は問題が入っている配列で、配列の長さが0より小さければ<br>
（つまり全ての問題を時間内に打ち終わって配列の要素が空になったら）<code>displayEndMessage</code>関数を呼び出します。</p>
<p>また、関数の引数に「"ゲームクリア！お疲れ様でした！！"」という文字列が入っているので<br>
関数の実行時に、この文字列が引数として渡されます。</p>
<p>つまり、全ての問題を打ち終わったらメッセージを呼び出すために<br>
<code>displayEndMessage</code>という関数を呼び出しているということになります。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">else</span> {
        setQuestion(); 
    }
</div></code></pre>
<p><code>else</code>は、ではなければ〜という意味なので、もし残りの問題がある場合は<br>
次の問題に進むために<code>setQuestion</code>関数を呼び出して次の問題をセットしています。</p>
<p>つまり、<b>「問題がまだ残っていたら問題をセットして、問題がなくなればゲームクリアのメッセージを
表示させる</b>」という処理を行っています。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
<span class="hljs-keyword">else</span> {
        inputText.classList.add(<span class="hljs-string">'incorrect'</span>);
        inputText.classList.remove(<span class="hljs-string">'correct'</span>);
    }
</div></code></pre>
<p>このコードは、プレイヤーが間違った入力をした場合の処理を行っています。</p>
<p>間違って文字を入力した場合は文字を赤色にしたいので、<code>classList.add()</code>で<code>incorrect</code>という<br>クラスを付けて、文字を赤色にしています。</p>
<p>また、それと同時に、<code>classList.remove</code>で<code>correct</code>という
<br>クラスを外すことで、文字が黒色になることを防いでいます。</p>
<p><code>inputText.classList.add('incorrect')</code> だけで赤色にすることはできますが、<br>
<code>correct</code> クラスが残っているとスタイルが競合する可能性があるため、<code>classList.remove</code>を実行しています。</p>
<h2><b>これでテキスト入力のプログラムが出来ました！</b></h2>
<hr>
<p>⑨最後に、問題を呼び出す関数とタイマーの関数を実行していきましょう！<br>
先程のコードの続きに記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-comment">// script.js</span>
setQuestion();
startTimer();
</div></code></pre>
<p>ここでは、これまでに作成した関数を呼び出しています。<code>setQuestion()</code> は問題をセットし、<br><code>startTimer()</code> は時間を測るためのタイマーを開始します。</p>
 <p>関数の呼び出しは、関数の定義よりも後に書く必要があるので注意が必要です。<br>
 JavaScriptでは、関数の定義が実行される前にその関数を呼び出すとエラーになります。</p>
 <h2><b>これで全てのプログラムが完成しました！<br>
 実際にゲームで遊んでみましょう！</b></h2>
<hr>
<h2><b>練習問題</b></h2>
<p>①タイピングゲームの問題文を変えてみよう！<br>
（自分の好きな問題に変えてOKです）</p>
<p>②タイピングゲームの問題文を5問に減らし、タイマーを15秒に設定しよう！</p>
<p>③正しい文字が打てなかった場合の文字の色を青に変更してみよう！</p>
<p>④ゲームクリアのメッセージとゲーム終了のメッセージを変えてみよう！<br>
（自分の好きな言葉に変えてOKです）</p>

</body>
</html>
